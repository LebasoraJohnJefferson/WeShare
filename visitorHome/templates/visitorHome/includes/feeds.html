{% load static %}

<head>
  <link rel="stylesheet" href="{% static 'styles/feeds.css'%}" />
</head>

<main class='col-md-8 mx-auto'>
  <div class="feeds_container">
    {% if user.is_authenticated %}
      {% include "../includes/post-content.html" %}
    {% endif %}

    {% if posts %}
      {% for post in posts %}
        <article
          class="post container bg-dark my-3 p-4 w-100"
          id='article'
        >
          <div class="row">
            <div class="col-1 w-auto">
              <img
                id="profile"
                class="img-thumbnail rounded-circle"
                src="https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                alt="profile"
              />
            </div>
            <div class="col-8 py-2">
              <p class="row p-0 m-0">{{post.post_owner.username}}</p>
              <p class="row p-0 m-0">{{post.updated | timesince}} ago</p>
            </div>
            {% if request.user.id == post.post_owner.id%}
            <div class="col d-flex justify-content-end w-100 dropdown">
              <button class="btn btn-warning dropdown-toggle p-1 h-50" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"></button>
              <ul class="dropdown-menu bg-secondary border border-warning" aria-labelledby="dropdownMenuButton1">
                <li><a class="text-warning dropdown-item" href="{% url "delete" post.id %}">DELETE</a></li>
                <li><a class="text-warning dropdown-item" href="{% url "edit" post.id %}">EDIT</a></li>
              </ul>
            </div>
            {% endif %}
          </div>

          <div class="mt-3">{{post.description}}</div>

          {% if post.post_image%}
            <div
              class="mt-3 w-100"
              id='img-container'
            >
              <img
                id='img-article'
                src="media/{{post.post_image}}"
                alt="content"
                class="w-100"
                style="object-fit: cover;"
              />
            </div>
          {% endif %}

          <hr class="bg-secondary" />
          <ul class="interact list-unstyled row m-auto p-2" align="center">
            <li class="col">
              <span class="item px-4 pb-3 pt-4">
                <a href="{% url 'likes' post.id%}"><i class="fad fa-heart-circle fa-2x"></i></a>
                  {{ post.count_like.count }}
              </span>
            </li>
            <li class="col">
              <span class="item px-4 pb-3 pt-4">
                <i class="fad fa-comment-dots fa-2x"></i>
              </span>
              
            </li>
            <li class="col" >
              <span class="item px-4 pb-3 pt-4">
                <i class="fad fa-share fa-2x"></i>
              </span>
              
            </li>
          </ul>
        </article>
      {% endfor %}

    {% else %}
      <div class="no_post__wrapper">
        <h4>There's no post(s) available. Create one :)</h4>
      </div>

    {% endif %}



  </div>

  </main>
